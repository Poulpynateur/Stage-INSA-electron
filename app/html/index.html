<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>INSA</title>
	<link rel="stylesheet" href="../../ressources/Vendor/bootstrap.min.css" />
</head>

<body>

	<div class="modal fade" id="scraping_test_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="scraping_test_modal_title"></h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div id="scrapping_test_status" class="text-center">
						<div class="spinner-border" role="status">
							<span class="sr-only">Loading...</span>
						</div>
					</div>
					<div>
						<div class="row">
							<div class="col-10" id="scrapping_test_url"></div>
							<div class="col-2" id="scrapping_test_total"></div>
						</div>
						<div class="row">
							<h5 id="scrapping_test_title"></h5>
							<p id="scrapping_test_abstract"></p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<header class="container">
		<h1 class="my-4 text-center">Scrapping data from scientific blogs and articlesâ€™s RSS feed</h1>

		<button class="btn btn-secondary btn-block mb-3" type="button" data-toggle="collapse" data-target="#add_source_collapse">Add a scrapping source</button>
		<div class="collapse" id="add_source_collapse">
			<div class="card card-body">
				<form id="add_scraping">
					<div class="form-row">
						<div class="form-group col">
							<label>Site name</label>
							<input name="full_name" type="text" class="form-control" placeholder="Example website" value="IOPSCIENCE : Bioinspiration & Biomimetics">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col">
							<label>Domain URL</label>
							<input name="domain_url" type="text" class="form-control" placeholder="https://example.com" value="https://iopscience.iop.org">
						</div>
						<div class="col">
							<label>Articles URL page</label>
							<input name="articles_url" type="text" class="form-control" placeholder="/articles?page=*page_number*&articles=*article_per_page*" value="/collection/*article_per_page*/*page_number*?collectionType=PHYSICS_REVIEWS">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col">
							<label>Article per page</label>
							<input name="article_per_page" type="text" class="form-control" placeholder="10" value="50">
						</div>
						<div class="col">
							<label>First page number</label>
							<input name="page_number" type="text" class="form-control" placeholder="1" value="1">
						</div>
					</div>

					<h5>Queries</h5>
					<div class="form-row">
						<div class="form-group col">
							<label>Article</label>
							<input name="article" type="text" class="form-control" value="div.art-list-item.reveal-container">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col">
							<label>Article title</label>
							<input name="title" type="text" class="form-control" value="h2 a">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col">
							<label>Article abstract</label>
							<input name="abstract" type="text" class="form-control" value="div.article-text.view-text-small p">
							<div class="form-check">
								<input name="abstract_article_page" class="form-check-input" type="checkbox" value="">
								<label class="form-check-label">
									Abstract is on the article page
								</label>
							</div>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col">
							<label>Article link</label>
							<input name="link" type="text" class="form-control" value="h2 a">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col">
							<label>Total article number</label>
							<input name="total_articles" type="text" class="form-control" value="#wd-iop-col-2nd-controls span">
						</div>
					</div>
					<div class="form-row">
						<div class="col"><button type="submit" class="btn btn-primary btn-block">Add</button></div>
						<div class="col"><a id="add_scraping_test" class="btn btn-outline-primary btn-block" data-toggle="modal" data-target="#scraping_test_modal" href="#" role="button">Test</a></div>
					</div>
				</form>
			</div>
		</div>

		<hr class="my-4">
		<div class="row">
			<div class="col-12 col-lg-8 input-group mb-3">
				<div class="input-group-prepend">
					<label class="input-group-text" for="RSS_feed_origin">Articles origin</label>
				</div>
				<select class="custom-select" id="target_site">
					<option value="" selected>Choose...</option>
				</select>
			</div>
			<div class="col-6 col-lg-2">
				<button id="navigate_to_site" class="w-100 btn btn-outline-primary">Go to site</button>
			</div>
			<div class="col-6 col-lg-2">
				<button id="scrape_articles" class="w-100 btn btn-primary">Scrap articles</button>
			</div>
		</div>
	</header>

	<main class="container d-none">
		<hr class="my-4">
		<div class="row">
			<div class="col-8">Scrapping from <h5 id="site_name" class="d-inline-block"></h5></div>
			<div class="col-4">
				<div id="scrapping_status_total" class="text-right">
					<div class="spinner-border" role="status">
						<span class="sr-only">Loading...</span>
					</div>
				</div>
			</div>
		</div>
		
		<div id="scrapping_in_process" class="d-none">
			<div class="my-3">
				<div class="progress">
					<div id="progress_bar_article" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
				</div>
			</div>
			<div class="row text-center mb-2">
				<span id="progress_nbr_article" class="lead w-100"></span>
			</div>
		</div>

		<div id="scrapping_done" class="d-none">
			<hr class="my-4">
			<h4 class="text-center text-success">Done !</h4>
		</div>
	</main>

	<script>let $ = require('jquery');</script>
	<script>require('popper.js');</script>
	<script>require('bootstrap');</script>
	<script>require('../index.js')</script>
</body>
</html>